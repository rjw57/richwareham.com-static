<link rel="import" href="../js/bower_components/polymer/polymer.html">
<script src="../js/bower_components/moment/moment.js"></script>

<link rel="import" href="loading-throbber.html">

<polymer-element name="short-link-list" block attributes="hello">
  <template>
    <style>
    </style>
    <core-style ref="rw-theme"></core-style>

    <core-ajax auto url="/@" handleAs="json" response="{{ links }}">
    </core-ajax>

    <template if="{{ links === null || !links.redirects}}">
      <div horizontal layout center-justified style="padding: 32px 0">
        <loading-throbber></loading-throbber>
      </div>
    </template>

    <template if="{{ links !== null && links.redirects }}">
      <table class="table">
        <thead>
          <th>Shortcut</th><th>Destination</th>
          <th incidental>Modified</th><th incidental>Created</th>
        </thead>
        <tbody>
          <tr template repeat="{{ l in links.redirects }}">
            <td><a href="{{ l.urls.self }}">{{ l.from }}</a></td>
            <td><a href="{{ l.to }}">{{ l.to }}</a></td>
            <td incidental>{{ l.modified | date }}</td>
            <td incidental>{{ l.created | date }}</td>
          </tr>
        </tbody>
      </table>
    </template>
  </template>
  <script>Polymer({
    links: null,
    date: function(value) {
      return moment(value).format('lll');
    },
  });</script>
</polymer-element>



